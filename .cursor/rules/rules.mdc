# 🚀 Krib AI Development Rules & Guidelines

## ⚠️ **CRITICAL REMINDER - MAIN OBJECTIVE**

**WE ARE BUILDING A RENTAL PLATFORM, NOT DEPLOYING SUNA AS-IS!**

### **🎯 Primary Mission**: 
Transform SUNA into **Krib AI** - a multi-agent **rental platform** with:
- **Short-term rentals** (Airbnb-style booking agents)
- **Long-term rentals** (Real estate viewing, applications, DocuSign contracts)
- **Property search, booking, and commission processing**

### **📋 Current Status**: 
- ✅ Deployed SUNA platform (transformed to Krib AI!)
- ✅ **Updated frontend branding to Krib AI**
- ✅ **Applied rental platform database schema**
- 🔲 **Need to build rental platform features**
- 🔲 **Follow tasks.md systematically**
- 🔲 **Implement report.pdf requirements**

---

## 📋 **Core Principles**

### ❌ **NEVER DO:**
- **Deploy without implementing requirements** - MAJOR MISTAKE MADE!
- **No workarounds** - Always implement proper solutions
- **No placeholders** - Use real values, real keys, real configurations
- **No mockups** - Build functional, production-ready components
- **No fake data** - Use actual data sources and APIs
- **No shortcuts** - Follow systematic integration patterns
- **DON'T FORGET THE MAIN OBJECTIVE** - Always refer back to tasks.md!
- **Don't finish without updating tasks.md** - Track all completed work!

### ✅ **ALWAYS DO:**
- **Follow tasks.md systematically** - This is the roadmap!
- **Read report.pdf requirements** - Core technical specifications
- **Ask when uncertain** - Confirm requirements before implementing
- **Use best practices** - Follow established patterns and conventions
- **Systematic integration** - Plan and execute methodically
- **Clean code** - Readable, maintainable, well-documented
- **Track versions** - Document changes and maintain version history
- **Check progress against tasks.md regularly**
- **Update tasks.md when completing work** - Mark tasks as completed
- **Push changes to Vercel/Heroku after each completed task**

---

## 🎯 **Rental Platform Requirements (from tasks.md)**

### **🏠 Core Features Needed:**
1. **Property Management** - Short-term & long-term listings
2. **AI Booking Agents** - Automated vacation rental booking
3. **Viewing Coordination** - Real estate property tours
4. **Application Processing** - Tenant screening and applications
5. **DocuSign Contracts** - Automated tenancy agreements
6. **Commission Processing** - Stripe integration for payments
7. **Multi-Dashboard UI** - Guests, Hosts, Agents, Admin

### **✅ What We Have Now:**
- Krib AI rental platform branding (updated!)
- Rental platform database schema (deployed!)
- Backend infrastructure with rental APIs
- Frontend transformed to rental platform

### **🔲 What We Still Need:**
- Functional rental platform features
- AI rental agents (PropertySearchAgent, BookingAssistant)
- DocuSign and Stripe integrations
- Complete rental dashboards

---

## 🛠️ **Technical Standards**

### **Environment Configuration**
- Always use proper environment variables
- Never hardcode API keys or sensitive data
- Use `.env.example` templates for documentation
- Configure proper `.gitignore` for security

### **Deployment Process**
1. **Backend (Heroku)**:
   - Use `requirements.txt` and `runtime.txt`
   - Set all environment variables properly
   - Scale web + worker dynos
   - Test endpoints before frontend deployment

2. **Frontend (Vercel)**:
   - Use `vercel.json` for configuration
   - Set all `NEXT_PUBLIC_*` environment variables
   - Configure build and output directories
   - Test deployment before going live

### **Integration Patterns**
- **Database**: Supabase with RLS (Row Level Security)
- **Authentication**: Supabase Auth + JWT validation
- **API Design**: OpenAPI-first with FastAPI
- **State Management**: React Query for server state
- **Styling**: Tailwind CSS with shadcn/ui components

---

## 📚 **Critical Information to Remember**

### **Current Deployment URLs**
- **Backend**: https://kribai-f4ba8309f76d.herokuapp.com/
- **Frontend**: [Vercel URL to be updated]
- **Database**: https://rbsswyljndnvrjnfexya.supabase.co

### **What Needs to Be Built (FROM TASKS.MD)**
- **Phase 0**: ✅ Infrastructure (done) 
- **Phase 1**: 🔄 Core API Services (rental-specific endpoints created)
- **Phase 2**: 🔲 AI Agent System (booking/application agents)  
- **Phase 3**: 🔄 Frontend Applications (branding updated, features needed)
- **Phase 4**: 🔲 Integration (DocuSign, Stripe)

### **Key Services to Implement**
- Property Service (short-term + long-term) ✅
- Booking/Application Service ✅  
- DocuSign Integration Service 🔲
- Commission/Payment Service (Stripe) 🔲
- AI Rental Agents (PropertySearchAgent, BookingAssistant, etc.) 🔲

---

## 🔧 **Development Workflow**

### **Before Starting Any Feature:**
1. **Check tasks.md** - Understand the rental platform requirements
2. **Reference report.pdf** - Get technical specifications  
3. **Plan rental-specific architecture** - Not generic AI agents!
4. **Identify rental dependencies** - Properties, bookings, contracts
5. **Ask questions about rental workflows** - Short vs long-term flows

### **During Development:**
1. **Build rental platform features** - Not generic agent tools
2. **Implement property/booking workflows** - Core rental logic
3. **Add DocuSign/Stripe integrations** - Essential rental features
4. **Test rental scenarios** - Booking flows, applications, contracts
5. **Document rental API changes** - Property management, bookings

### **After Completing a Task:**
1. **Update tasks.md** - Mark completed tasks with ✅
2. **Add completion timestamp** - When the task was finished
3. **Commit changes to git** - Include tasks.md updates
4. **Push to deployment** - Vercel for frontend, Heroku for backend
5. **Verify deployment works** - Test the deployed changes
6. **Update progress tracking** - Note what's working in production

### **Before Deployment:**
1. **Verify rental features work** - Property search, booking, applications
2. **Test DocuSign integration** - Contract generation and signing
3. **Validate Stripe payments** - Commission processing
4. **Check rental dashboards** - Host, agent, tenant interfaces
5. **Test end-to-end rental flows** - Short and long-term processes

---

## 🚨 **Quality Assurance**

### **Before Pushing Code**
- [ ] Rental features implemented (not generic agents)
- [ ] Property management working
- [ ] Booking/application flows tested  
- [ ] DocuSign integration functional
- [ ] Commission processing working
- [ ] Rental dashboards responsive
- [ ] tasks.md progress updated ⭐ **REQUIRED**

### **Before Going Live**
- [ ] All rental workflows tested
- [ ] Property search functional
- [ ] Booking automation working
- [ ] Contract generation tested
- [ ] Payment processing verified
- [ ] All user roles tested
- [ ] Documentation updated
- [ ] Changes pushed to Vercel/Heroku ⭐ **REQUIRED**

---

## 📝 **Task Management Requirements**

### **🔄 Task Completion Process (MANDATORY)**
When finishing ANY task:

1. **Open tasks.md**
2. **Find the completed task**
3. **Change `- [ ]` to `- [✅]`** 
4. **Add completion date**: `(Completed: YYYY-MM-DD)`
5. **Add brief note**: What was accomplished
6. **Save tasks.md**
7. **Commit with message**: "Complete: [task description]"
8. **Push to git**: `git push origin main`
9. **Deploy changes**: Push to Vercel/Heroku
10. **Verify deployment**: Check live site works

### **📊 Progress Tracking Format**
```markdown
- [✅] Create rental platform database schema (Completed: 2025-01-27)
  - Applied comprehensive SQL migration with properties, bookings, contracts
  - Added RLS policies and performance indexes
  - Verified all tables and relationships working
```

---

## 📞 **When to Ask for Clarification**

- **Unclear rental workflow requirements**
- **Property management specifics**  
- **Booking vs application process differences**
- **DocuSign contract template details**
- **Commission calculation rules**
- **Short-term vs long-term feature differences**

---

## 🔄 **Recovery Action Plan**

### **Current Status**: Platform successfully transformed to Krib AI rental focus

### **Immediate Next Steps**:
1. **Continue building rental features systematically**
2. **Follow tasks.md Phase 1: Core API Services**
3. **Create functional rental dashboards**
4. **Implement AI rental agents**
5. **Add DocuSign integration**
6. **Build commission processing**

---

**Remember: We're building a RENTAL PLATFORM, not a generic AI agent system!**
**Always check progress against tasks.md and rental platform requirements!**
**ALWAYS update tasks.md and push changes when completing work!** ⭐
description:
globs:
alwaysApply: false
---
